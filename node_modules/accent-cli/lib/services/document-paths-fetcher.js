"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const revision_slug_fetcher_1 = require("./revision-slug-fetcher");
class DocumentPathsFetcher {
    fetch(project, document) {
        const languageSlugs = revision_slug_fetcher_1.fetchFromRevisions(project.revisions);
        const documentPaths = project.documents.entries.map(({ path }) => path);
        return languageSlugs.reduce((memo, slug) => {
            documentPaths.forEach((path) => {
                const parsedTarget = document.target
                    .replace('%slug%', slug)
                    .replace('%original_file_name%', path)
                    .replace('%document_path%', path);
                if (!memo.find(({ path }) => path === parsedTarget)) {
                    memo.push({ documentPath: path, path: parsedTarget, language: slug });
                }
            });
            return memo;
        }, []);
    }
}
exports.default = DocumentPathsFetcher;
