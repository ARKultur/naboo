"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Vendor
const errors_1 = require("@oclif/errors");
const fs = require("fs-extra");
// Services
const document_1 = require("./document");
class ConfigFetcher {
    constructor() {
        this.config = fs.readJsonSync('accent.json');
        this.config.apiKey = this.config.apiKey || process.env.ACCENT_API_KEY;
        this.config.apiUrl = this.config.apiUrl || process.env.ACCENT_API_URL;
        if (!this.config.apiKey) {
            errors_1.error('You must have an apiKey key in the config or the ACCENT_API_KEY environment variable');
        }
        if (!this.config.apiUrl) {
            errors_1.error('You must have an apiUrl key in the config or the ACCENT_API_URL environment variable');
        }
        if (!this.config.files) {
            errors_1.error('You must have at least 1 document set in your config');
        }
    }
    files() {
        return this.config.files.map((documentConfig) => new document_1.default(documentConfig, this.config));
    }
}
exports.default = ConfigFetcher;
